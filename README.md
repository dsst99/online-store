üöÄ Online Store
--------------------------------------------------------------------------------------------------------------

| –†–∞–∑–¥–µ–ª               | –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª                                                                         |
|----------------------|------------------------------------------------------------------------------------| 
| üìÇ –ö–∞—Ç–∞–ª–æ–≥           | –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Ç–æ–≤–∞—Ä—ã —Å –ø–æ–∏—Å–∫–æ–º, —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º                             |
| üßë‚Äçüíª –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –≤—Ö–æ–¥ –ø–æ JWT, –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ access-—Ç–æ–∫–µ–Ω–∞ (refresh)                          |
| üì¶ –ó–∞–∫–∞–∑—ã            | –û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤, –ø—Ä–æ–≤–µ—Ä–∫–∞ stock, –ø–µ—Ä–µ—Å—á—ë—Ç total_price, –∏—Å—Ç–æ—Ä–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤         |
| ‚ö° –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏ | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PDF –∏ —ç–º—É–ª—è—Ü–∏—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∏—Å–µ–º, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –≤–Ω–µ—à–Ω–∏–º API (Celery + Redis) |
| üóÑÔ∏è –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ      | Memcached –¥–ª—è —Å–ø–∏—Å–∫–æ–≤ –∏ –¥–µ—Ç–∞–ª–µ–π                                                     |
| üõ†Ô∏è –ê–¥–º–∏–Ω-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å  | –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞–∫–∞–∑–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ –ø–æ —Å—Ç–∞—Ç—É—Å–∞–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º                            |
| üìë –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API  | Swagger / Redoc                                                                    |
|                      |                                                                                    |
| ‚úÖ –¢–µ—Å—Ç—ã              | –ü–æ–∫—Ä—ã—Ç–∏–µ API —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º pytest                                              |
---------------------------------------------------------------------------------------------------------------

Django + DRF + Celery + Memcached
-------------------------------------------------------------------------

‚ö° –°—Ç–µ–∫
-------------------------------------------------------------------------

- Django 5.x + DRF ‚Äî REST API

- PostgreSQL (prod) / SQLite (dev)

- Redis + Celery ‚Äî —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ (PDF, —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è)

- Memcached ‚Äî –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ø–∏—Å–∫–æ–≤ –∏ –¥–µ—Ç–∞–ª–µ–π

- JWT (SimpleJWT) ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

- drf-spectacular ‚Äî OpenAPI / Swagger / Redoc

- pytest + pytest-django ‚Äî —Ç–µ—Å—Ç—ã

-------------------------------------------------------------------------
üõ† –ë—ã—Å—Ç—Ä—ã–π –∑–∞–ø—É—Å–∫ (–ª–æ–∫–∞–ª—å–Ω–æ)

# –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

| –ö–æ–º–∞–Ω–¥–∞                           | –û–ø–∏—Å–∞–Ω–∏–µ                         |
|-----------------------------------|----------------------------------|
| `python -m venv .venv`            | –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è  |
| `source .venv/bin/activate`       | –ê–∫—Ç–∏–≤–∞—Ü–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è |
| `pip install -r requirements.txt` | –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –ø—Ä–æ–µ–∫—Ç–∞   |

-------------------------------------------------------------------------

# –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

| –ö–æ–º–∞–Ω–¥–∞                            | –û–ø–∏—Å–∞–Ω–∏–µ                          |
|------------------------------------|-----------------------------------|
| `python manage.py migrate`         | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö |
| `python manage.py createsuperuser` | –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è        |

---------------------------------------------------------------------------

# –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å—ã

| –ö–æ–º–∞–Ω–¥–∞                                 | –û–ø–∏—Å–∞–Ω–∏–µ                                |
|-----------------------------------------|-----------------------------------------|
| `redis-server`                          | –ó–∞–ø—É—Å–∫ Redis (–±—Ä–æ–∫–µ—Ä –¥–ª—è Celery)        |
| `memcached -vv`                         | –ó–∞–ø—É—Å–∫ Memcached (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ)          |
| `celery -A online_store worker -l info` | –ó–∞–ø—É—Å–∫ Celery –≤–æ—Ä–∫–µ—Ä–∞ –¥–ª—è —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á |
| `python manage.py runserver`            | –ó–∞–ø—É—Å–∫ Django —Å–µ—Ä–≤–µ—Ä–∞                   |

--------------------------------------------------------------------------------------
üê≥ Docker Compose

# –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

| –ö–æ–º–∞–Ω–¥–∞                     | –û–ø–∏—Å–∞–Ω–∏–µ                    |
|-----------------------------|-----------------------------|
| `docker compose up --build` | –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ |

--------------------------------------------------------------
üîß Entrypoint –∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫—ç—à–∞

| –®–∞–≥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| 1   | –ñ–¥—ë—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏ —Å–µ—Ä–≤–∏—Å–æ–≤: Postgres, Redis –∏ Memcached |
| 2   | –ü—Ä–∏–º–µ–Ω—è–µ—Ç –º–∏–≥—Ä–∞—Ü–∏–∏: `python manage.py migrate` |
| 3   | –ó–∞–ø—É—Å–∫–∞–µ—Ç Django —Å–µ—Ä–≤–µ—Ä (`runserver`) –∏–ª–∏ Celery –≤–æ—Ä–∫–µ—Ä |
| 4   | –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Memcached: `127.0.0.1:11211` |
| 5   | –û–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ —Å—Ç–∞—Ä—Ç–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ web –∏ worker |
| ‚ö†Ô∏è   | –ù–µ –∏–∑–º–µ–Ω—è—Ç—å —Ñ–∞–π–ª –±–µ–∑ –ø–æ–Ω–∏–º–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏ –∑–∞–ø—É—Å–∫–∞, –∏–Ω–∞—á–µ –º–æ–∂–µ—Ç –Ω–∞—Ä—É—à–∏—Ç—å—Å—è —Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–∏—Å–æ–≤ |
------------------------------------------------------------------------------------------------

# –ú–∏–≥—Ä–∞—Ü–∏–∏ –∏ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å

| –ö–æ–º–∞–Ω–¥–∞                                                    | –û–ø–∏—Å–∞–Ω–∏–µ                                |
|------------------------------------------------------------|-----------------------------------------|
| `docker compose exec web python manage.py migrate`         | –ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ        |
| `docker compose exec web python manage.py createsuperuser` | –°–æ–∑–¥–∞–Ω–∏–µ —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ |

---------------------------------------------------------------------------------------------------------
‚öôÔ∏è –ö–ª—é—á–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

AUTH_USER_MODEL = "users.User"

REST_FRAMEWORK["DEFAULT_AUTHENTICATION_CLASSES"] = (
"rest_framework_simplejwt.authentication.JWTAuthentication",
)

CACHES = {
"default": {
"BACKEND": "django.core.cache.backends.memcached.PyMemcacheCache",
"LOCATION": "127.0.0.1:11211",
}
}

--------------------------------------------------------------------------------------------------
üîó API
Users (apps/users)
| Endpoint | Method | Description |
| ------------------------ | ------ | --------------------------------------- |
| `/api/v1/auth/register/` | POST | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è {username, email, password} |
| `/api/v1/auth/login/`    | POST | JWT {access, refresh} |
| `/api/v1/auth/refresh/`  | POST | –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ access –ø–æ refresh |
-------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------------------
Catalog
| Endpoint | Method | Description |
| ------------------------------------- | ------ | ---------------------------------------------------- |
| `/api/v1/categories/?search=`         | GET | –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π, –∫—ç—à 5 –º–∏–Ω |
| `/api/v1/categories/{id}/`            | GET | –î–µ—Ç–∞–ª—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏, –∫—ç—à 5 –º–∏–Ω |
| `/api/v1/categories/{id}/?hard=true`  | DELETE | Hard delete ‚Äî —Ç–æ–ª—å–∫–æ –∞–¥–º–∏–Ω –∏ –±–µ–∑ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤ |
| `/api/v1/products/?search=&category=` | GET | –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–æ–¥—É–∫—Ç–æ–≤, –∫—ç—à 5 –º–∏–Ω |
| `/api/v1/products/{id}/`              | GET | –î–µ—Ç–∞–ª—å –ø—Ä–æ–¥—É–∫—Ç–∞, –∫—ç—à 5 –º–∏–Ω |
---------------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------------------
Orders (JWT required)
| Endpoint | Method | Description |
| ----------------------- | ------ | ---------------------------------------------------------------------- |
| `/api/v1/orders/`       | GET | –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫—ç—à 60—Å |
| `/api/v1/orders/`       | POST | –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–∫–∞–∑–∞ (—Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è, select\_for\_update, Celery: PDF + email) |
| `/api/v1/orders/{id}/`  | GET | –î–µ—Ç–∞–ª—å –∑–∞–∫–∞–∑–∞ (–≤–ª–∞–¥–µ–ª–µ—Ü/–∞–¥–º–∏–Ω), –∫—ç—à 60—Å |
| `/api/v1/orders/{id}/`  | PATCH | –°–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞ (–≤–∞–ª–∏–¥–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã; shipped ‚Üí Celery API call)           |
| `/api/v1/admin/orders/` | GET | –ê–¥–º–∏–Ω-—Å–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏, –∫—ç—à 60—Å |
-------------------------------------------------------------------------------------------------------------

--------------------------------------------------------------------------------------------------
–ü—Ä–∏–º–µ—Ä –æ—à–∏–±–∫–∏ stock (HTTP 400):
{
"stock": "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Ç–æ–≤–∞—Ä–∞ –Ω–∞ —Å–∫–ª–∞–¥–µ",
"details": [{"product_id": 1, "available": 2, "requested": 5}]
}

----------------------------------------------------------------
üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

| Endpoint                  | –û–ø–∏—Å–∞–Ω–∏–µ       |
|---------------------------|----------------|
| `/api/schema/`            | OpenAPI schema |
| `/api/schema/swagger-ui/` | Swagger UI     |
| `/api/schema/redoc/`      | Redoc          |

----------------------------------------------------------------

‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

- –ö–∞—Ç–∞–ª–æ–≥: –º–æ–¥–µ–ª–∏, API, —Ñ–∏–ª—å—Ç—Ä—ã, –∫—ç—à, —Å–∏–≥–Ω–∞–ª—ã, —Ç–µ—Å—Ç—ã

- –ó–∞–∫–∞–∑—ã: –º–æ–¥–µ–ª–∏, —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, select_for_update, API, Celery-–∑–∞–¥–∞—á–∏, –∫—ç—à, —Ç–µ—Å—Ç—ã

- JWT: —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ª–æ–≥–∏–Ω, refresh

- drf-spectacular: Swagger / Redoc

- pytest: –∫–∞—Ç–∞–ª–æ–≥, –∑–∞–∫–∞–∑—ã, users + auth flow

--------------------------------------------------------------------------------------------------

üß™ –¢–µ—Å—Ç—ã

–¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∏–∫—Å—Ç—É—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: –∫–æ—Ä–Ω–µ–≤–æ–π conftest.py (—É–Ω–∏–∫–∞–ª—å–Ω—ã–µ email, get_user_model())


--------------------------------------------------------------------------------------------------

| –ö–æ–º–∞–Ω–¥–∞                   | –û–ø–∏—Å–∞–Ω–∏–µ                                             |
|---------------------------|------------------------------------------------------|
| `pytest -q`               | –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Ç–µ—Å—Ç–æ–≤                                   |
| `pytest apps/catalog/ -q` | –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∫–∞—Ç–∞–ª–æ–≥–∞                               |
| `pytest apps/orders/ -q`  | –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –∑–∞–∫–∞–∑–æ–≤                                |
| `pytest apps/users/ -q`   | –¢–µ—Å—Ç—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, –ª–æ–≥–∏–Ω–∞, refresh –∏ –¥–æ—Å—Ç—É–ø –∫ orders |

--------------------------------------------------------------------------------------------------
